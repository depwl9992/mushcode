<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, September 03, 2011, 2:04 PM -->
<!-- MuClient version 4.77 -->

<!-- Plugin "ArchiveLogs" generated by Plugin Wizard -->

<muclient>
<plugin
   name="ArchiveLogs"
   author="Daniel Powell"
   id="8f848527996c579a22f17dbc"
   language="Lua"
   purpose="Archives log files on world close"
   save_state="y"
   date_written="2011-09-03 14:01:51"
   requires="4.60"
   version="1.0"
   >
<description trim="y">
<![CDATA[
All logs that are created should be included in my archive.bat/stampme.cmd shell commands. If they are, running archive.bat will datestamp the log file. This plugin will do this when the world is closed.

Actually, it will be really nice if the archive.bat will work on logs whose worlds are only disconnected rather than completely closed, so this plugin may be written to work on the OnPluginDisconnect() rather than OnPluginClose().

1. Simply load the plugin into your global plugins (or per world if that is your preference). 

2. Make sure that archive.bat and stampme.cmd exist in your -LOG- directory.

3. Open archive.bat in a text editor and add lines pertaining to your log filenames. Be sure and leave the top few lines as is. Only add or remove entries below the comment that says you may.

4. When you disconnect from a world, your entire listing of logs in archive.bat will be called for datestamping. This does not apply to a per-world basis. It will try to do them all every time.
]]>
</description>

</plugin>


<!--  Script  -->


<script>
<![CDATA[
function OnPluginDisconnect()
  Note("Datestamping all logs stored in: " .. GetInfo(58))
  assert (utils.shellexecute (GetInfo(58) .. "archive.bat"))
end -- function


]]>
</script>


<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="ArchiveLogs:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end
]]>
</script> 

</muclient>
